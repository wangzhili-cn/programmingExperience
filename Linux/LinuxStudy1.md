---
linux达人养成计划1
---
> linux命令格式  

1. 起始符：  
[root@localhost ~]#  
root 当前登录用户  
localhost 主机名  
~ 当前所在目录（家目录）  
#超级用户的提示符  
  
2. ls命令选项：  
ls -a 显示所有文件，包括隐藏文件  
ls -l 显示详细信息  
ls -d 查看目录属性  
ls -h 人性化显示文件大小  
ls -i 显示inode  
  
3. 文件权限（10位），第一位为文件类型，后面每3位一组  
-rw-r--r--  
-文件类型（-文件 d目录 l软链接目录）  
rw- u所有者  
r-- g所属组  
r-- o其他人  
r读 w写 x执行  
  
-rw-r--r--. 1 root root 1207  
.代表ACL权限 1应用计数  
在linux中“.”开头的文件是隐藏文件。  
  
4. #超级用户的提示符 ￥普通用户的提示符 ~ 代表当前目录  

> linux文件操作-目录  
1. linux中一切皆文件。目录为目录文件。普通文件用来保存数据，目录文件用来保存文件。  
  
2. mkdir ：建立目录（make directories）  
  2-1）mkdir -p [目录名]  
    2-1-1）-p ：递归创建，当创建多级目录时需加  
  2-2)例：  
    2-2-1）mkdir light  
    2-2-2) mkdir -p imooc/linux/light  
      
3. cd [目录] ：切换目录（change directory）  
  3-1）简化操作  
    3-1-1）cd ~/ cd  ：进入当前用户的家目录  
    3-1-2）cd - ：进入上次目录  
    3-1-3）cd .. ：进入上一级目录  
    3-1-4）cd . ：进入当前目录  
      
4. 路径  
  4-1）相对路径：参照当前所在目录，进行查找  
  4-2）绝对路径：从根目录开始制定，一级一级递归，进行查找  
  
5. pwd ：查询所在目录位置（print working directory）  

6. ctrl+L == 清屏  

7. 双击Tab键补命令/目录  

> 目录处理命令2  

1. 删除空目录  
  1-1）rmdir [目录名] （remove empty directories）  
    1-1-1）只能删除空目录  
2. 删除文件或目录  
  2-1）rm -rf [文件或目录] （remove）  
    2-1-1）选项 -r ：删除目录  
    2-1-2）选项 -f ：强制  
    2-1-3）rm [文件名] ：提示是否删除  
    2-1-4）rm -r [目录] ：删除目录需加 -r ，目录中含有子文件，将持续询问是否删除  
    2-1-5）rm -rf [目录] ：删除目录， 不会询问是否删除而直接进行  
    2-1-6）纯字符界面没有回收站。注意自杀指令：rm -rf /  
  2-2）rm -rf /tmp/* ：删除tmp目录下的内容  
  2-3）rm -rf /tmp/  ：删除tmp目录  
3. 建议：删除文件或目录习惯使用命令 rm -rf [文件或目录]  
4. 复制命令  
  4-1）cp [选项] [原文件或目录] [目标目录] （copy）  
    4-1-1）选项 -r ：复制目录  
    4-1-2）选项 -p ：连带文件属性复制  
    4-1-3）选项 -d ：若原文件是链接文件，则复制链接属性  
    4-1-4）选项 -a ：相当于 -pdr 全选  
  4-2）例子  
    4-2-1）cp abc /tmp/ 若目标目录不加文件名，则为原名复制  
    4-2-2）cp abc /tmp/ana 若目标目录后加入文件名，则为改名复制  
    4-2-3）cp -r japan/ /tmp/ 复制目录  
    4-2-4）cp -a japan/ /tmp/ 完全复制，包括所有属性  
  4-3）被复制文件的时间为执行复制命令的时间，若要使被复制的文件与原文件属性完全一致，需加 -a  
5. 剪切或改名命令  
  5-1）mv [原文件或目录] [目标目录] （move）  
    5-1-1）mv japan/ /tmp/ 剪切目录时不需加 -r  
    5-1-2）mv abc longls 当原文件与目标目录，在同一目录下，则为改名命令  
6. 当前系统时间命令：date  
7. ls -l 命令别名 ：ll  

> linux常见目录作用  
linux 是个严谨的操作系统，一级目录都严格规定  
  
做练习推荐在家目录中（root或home），以及tmp。  
  
1. / 根目录  
  
2. /bin 命令保存目录（普通用户就可以读取的命令）  
  2-1）根目录下的bin和sbin，usr目录下的bin和sbin，这四个目录都是用来保存系统命令。其中，bin目录  
  
下的命令任何用户都可以执行，sbin目录下只有root才可以执行。linux使用此方式来区分用户权限。  
  
3. /boot 启动目录，启动相关文件  
  
4. /dev 设备文件保存目录  
  
5. /etc 配置文件保存目录  
  
6. /home 普通用户的家目录  
  
7. /lib 系统库保存目录  
  7-1）操作系统中并没有把所有功能都写入linux中，而将常用的功能写成一个个程序库，此些库保存在lib  
  
中，当需要时调用即可。避免全部写入linux中，使其无比庞大且运行缓慢。  
  
8. /mnt 系统挂载U盘、移动硬盘目录  
  8-1）老师习惯于在mnt下创建CD-ROM来挂载光盘，在mnt下创建USB来挂载U盘。原因在于老师的linux中不存  
  
在media、misc目录。  
  
9. /media 挂载光盘目录  
  
10. /misc 外接磁带机挂载目录  
  
11. /root 超级用户的家目录  
  
12. /tmp 临时目录  
  12-1）可存放临时数据  
  
13. /sbin 命令保存目录（超级用户才能使用的目录）  
  
14. /proc 直接写入内存的  
  14-1）该目录同sys目录不能直接操作，这两个目录保存的是内存的挂载点。其中的数据直接写在内存中。避免数据丢失或由于内存溢出导致系统崩溃。  
  
15. /sys   
  
16. /usr 系统软件资源目录  
  16-1）/usr/bin/ 系统命令（普通用户）  
  16-2）/usr/sbin/ 系统命令（超级用户）  
  
17. /var 系统相关文档内容  
- 最好是用root目录和home目录还有tmp目录来做练习  

> linux链接命令  
1.  ln -s [原文件] [目标文件] （link）  
  1-1）功能描述：生成链接文件  
  1-2）选项 -s 创建软链接  
  1-3）硬链接特征  
    1-3-1）拥有相同的i节点和存储block块，可以看做是同一个文件。  
    （在格式化时，第一将分区划分为等大小的block数据块，该数据块通常为4KB。  
    第二建立分区表，并为每个文件建立一个相关数据。当用户搜索某个文件时，  
    会先到分区表中查找文件所对应的block存储位置，接着到相应位置取出，并返回给用户。）  
    硬链接与原文件拥有相同的i节点。因此，与原文件非常相似。当删除原文件或硬链接文件的任何一文件，  
    不影响文件索引操作。可看做，同一个文件的不通进入点。它是同样的存储空间。  
    1-3-2）可通过i节点识别  
    1-3-3）不能跨分区建立  
    1-3-4）不能针对目录使用，只有文件才可以创建  
    1-3-5）ln ./source/abc ./target/bcd.hard  创建后，引用计数+1  
    1-3-6）ls -i ./source/abc ./target/bcd.hard 可使用ls -i 来查看文件i节点号   
    1-3-7）不建议创建硬链接文件  
      1-3-7-1）文件太过隐蔽，除了有i节点这样一个标识之外，很难区分它是不是硬链接  
      1-3-7-2）硬链接限制较多，不能跨分区，不能针对目录，使用当中容易出现错误使用方法  
  1-4）软链接特征  
    1-4-1）类似于Windows快捷方式  
    1-4-2）软链接拥有自己的i节点和block块，但是数据块中只保存原文件的文件名和i节点号，并没有实际的文件数据。  
    （拥有自己的分区表中索引数据,通过索引找到分区表中文件的目标索引数据，再通过目标索引数据，查找数据）  
    1-4-3）lrwxrwxrwx  l软链接， 软链接文件权限都为rwxrwxrwx, 虽然权限显示为777，但实际权限需要看原文件权限。  
    1-4-4）修改任意文件，另一个都改变  
    
2. vi  
按o进入输入模式（此时最下方会有--INSERT--字样），输入完成之后按esc退出（--INSERT---字样消失），  
然后输入:q（不保存并退出）或者:wq（保存并退出）即可【注意这里是英文的冒号】  
    1-4-5）删除原文件，软链接不能使用  
    1-4-6）创建软链接，原文件一定要写绝对路径。否则，软链接会到它所在的同一目录去找原文件。  

> linux文件收索命令  
1. 文件搜索命令locate  
locate 文件名  
在后台数据库中按文件名搜索，搜索速度非常快。  
locate命令所搜索的后台数据库：/var/lib/mlocate 默认一天更新一次  
当新建一个文件要搜索时，要自己更新数据库 updatedb  
可以通过locate locate来找到数据库。  
只能搜索文件。  
筛选规则在配置文件中，可对其进行修改/etc/updatedb.conf  
（whereis与which也遵守该规则）  
  
Linux中.conf一般为配置文件  

locate [文件名]  
  在后台数据库中按文件名搜索，搜索速度更快  
  /var/lib/malocate #locate命令所搜索的后台数据库  
  updatedb 更新数据库  
  按照配置文件/etc/updatedb.conf进行搜索，其中：  
    PRUNE_BIND_MOUNTS="yes" 开启搜索限制  
    PRUNEFS = 不搜索的文件系统  
    PRUNENAMES = 不搜索的文件类型  
    PRUNEPATHS = 不搜索的路径  

locate优点:在后台数据库搜索速度快  
          缺点:只能进行文件名搜索  
find:遍历搜索，有点慢，卡，但功能强大  

> linux中的命令收索命令  
- 白色：表示普通文件  
- 蓝色：表示目录  
- 绿色：表示可执行文件  
- 红色：表示压缩文件  
- 浅蓝色：链接文件  
- 红色闪烁：表示链接的文件有问题  
- 黄色：表示设备文件  
- 灰色：表示其它文件  

文件搜索命令：whereis   
   特点：用于搜索命令所在的路径以及帮助文档所在的位置，不能搜索用户自己创建的文件等信息。  
   选项：  
     -b:只查找可执行文件  
     -m:只查找帮助文件  
     
   文件搜索命令：which  
   特点：能看到命令的路径，如果有别名，还能看到别名的说明。  
   whereis和which不能看到shell命令，只能看到外部安装的命令。  
     
   $PATH说明：类似于Windows中的环境变量，执行命令的时候都要在path定义的目录中去寻找。  
所以像ls这样的命令就可以不用加路径（/bin/ls）执行了。  

whereis在哪里  
whoami是谁  
whatis干什么  

which 文件名  #搜索命令所在路径及别名  
  
[root@localhost ~]# which ls  
alias ls="ls --color=auto"  #别名  
        /bin/ls             #路径  
[root@localhost ~]# which pwd  
/bin/pwd     #路径  
  
whereis 和which 只能找到shell外来的系统命令。都不能找到cd命令，因为cd是shell自带的命令。  

echo $PATH 系统环境变量配置  

> find命令  
find搜索（避免大范围的搜索，会非常浪费系统资源，建议不在直接在“/”目录下搜索）  
格式：find 【搜索范围】【搜索条件】；  
例：find /home -name 文件名；  
注意：find搜索默认是完全匹配。  
  
如果需要进行模糊查询，需要添加通配符，通配符有以下3种  
“*”匹配任意字符，例：find /home -name “*test*”,显示所有名字带test的文件；或例：find /home -name “*”，home目录下的所有文件，包括隐藏文件。  
“?”匹配任意一个字符，  
“【】”匹配任意一个中括号内的字符，例：find /home -name “test【12】”，  
显示test1和test2文件；或find /home -name “【12】*”，显示以1和2开头的文件。  
组合使用：例：find /home -name “*【12】”，显示所有1和2结尾的文件  
  
find 按文件时间来搜索  
  
find /home -mtime +10 在home目录下，查找10天前修改的文件  
find /home -mtime 10 在home目录下，查找10天前当天修改的文件  
find /home -mtime -10 在home目录下，查找10天内修改的文件  
atime 文件访问时间  
ctime 改变文件属性  
mtime 修改文件内容  
  
find搜索  
find /root -iname test 不区分要搜索的test大小写格式  
find /root -user root 搜索root目录下的所有属于root用户的文件  
find /root -nouser 没有所属者的文件，liunx中，每个文件都有所属者，如果没有，那么一般都是垃圾文件，但还是有特例的，比如内核产生的文件，就没有所属者，一般在proc和sys目录下；还有外来文件，也就是U盘拷入的文件也会忽略所有者。  
  
find 目录 -size 文件大小  
注意：文件大小用小写k和大写M。  
-a 表示and  
-o 表示or  
find /etc -size +20k -a -size -50k -exec ls -lh {} \;  
-exec {} \; 固定格式，表示直接对前面的搜索结果进行后面的命令处理  

> grep文件中字符串收索命令  
grep [选项] 字符串 文件名 （字符串使用 "" 包围，结果为行记录）  
-i 忽略大小写  
-v 排除指定字符串  
  
find 命令与 grep 命令的区别  
  
find：在 系统 中搜索符合条件的 文件名，使用 通配符（完全）匹配  
grep：在 文件 当中搜索符合条件的 字符串，使用 正则表达式 （包含）匹配  

> man查看帮助命令
帮助命令  
1.man + 命令名称-----最常用的帮助命令,例如 man ls  
进入man命令里操作，q退出 ，输入：/ -d 搜索"-d"字符串，按n往下搜“-d”,shift+n 往上搜“-d”  
  
man的级别：  
man man, man ls,man -f password,man 1 password,whereis password,man -f null,man -f ifconfig  
  
1、查看命令的帮助   
2、查看可被内核调用的函数的帮助  
3、查看函数和函数库的帮助  
4、查看特殊文件的帮助（主要是/dev目录下的文件）  
5、查看配置文件的帮助  
6、查看游戏的帮助  
7、查看其它杂项的帮助  
8、查看系统管理员可用命令的帮助  
9、查看和内核相关文件的帮助  
  
man -f 命令 相当于 whatis 命令  
man -k 命令 相当于 apropos 命令 搜索含有关键词“命令”的帮助文档  
  
man是manual的缩写  
